# Database Fundamentals and SQL

---

## 1. Introduction to Databases

- A **database** is an organized collection of data that can be accessed, managed, and updated.
- **Database Management System (DBMS)** is software that interacts with users, applications, and the database itself to capture and analyze data.
- Types of DBMS:
  - **Relational DBMS (RDBMS)**: e.g., MySQL, PostgreSQL, Oracle, SQL Server
  - **NoSQL DBMS**: e.g., MongoDB, Cassandra, CouchDB

---

## 2. Database Models

### Relational Model
- Data is stored in tables (relations) with rows (tuples) and columns (attributes).
- Tables are related to each other through **keys**.

### Key Concepts in Relational Databases:
- **Primary Key**: Uniquely identifies each record in a table.
- **Foreign Key**: A key used to link two tables.
- **Composite Key**: A primary key made up of multiple columns.
- **Unique Key**: Ensures all values in a column are unique.

---

## 3. SQL (Structured Query Language)

SQL is the standard language used to interact with relational databases. It is used to perform operations like querying, updating, inserting, and deleting data.

### Basic SQL Commands:
- **SELECT**: Retrieve data from a table.
- **INSERT**: Add new data to a table.
- **UPDATE**: Modify existing data.
- **DELETE**: Remove data from a table.
  
Example:

```sql
SELECT * FROM employees;
INSERT INTO employees (name, age) VALUES ('John Doe', 30);
UPDATE employees SET age = 31 WHERE name = 'John Doe';
DELETE FROM employees WHERE name = 'John Doe';
```

---

## 4. SQL Data Types

Common SQL data types include:

| Data Type   | Description                                |
|-------------|--------------------------------------------|
| `INT`       | Integer values                             |
| `VARCHAR`   | Variable-length string                     |
| `CHAR`      | Fixed-length string                        |
| `DATE`      | Date in `YYYY-MM-DD` format                |
| `DATETIME`  | Date and time                              |
| `DECIMAL`   | Fixed-point numbers                        |
| `BOOLEAN`   | True/False values                          |

Example:

```sql
CREATE TABLE employees (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    age INT,
    hire_date DATE
);
```

---

## 5. Database Design

### Normalization
- **Normalization** is the process of organizing data to reduce redundancy.
- There are several normal forms (1NF, 2NF, 3NF), with each form eliminating specific types of redundancy.

### Primary vs Foreign Key Relationships
- **Primary Key** ensures the uniqueness of records within a table.
- **Foreign Key** establishes relationships between tables by referring to the primary key in another table.

Example:

```sql
CREATE TABLE departments (
    id INT PRIMARY KEY,
    name VARCHAR(100)
);

CREATE TABLE employees (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    department_id INT,
    FOREIGN KEY (department_id) REFERENCES departments(id)
);
```

---

## 6. SQL Queries

### SELECT Statement

Retrieve all records:

```sql
SELECT * FROM employees;
```

Retrieve specific columns:

```sql
SELECT name, age FROM employees;
```

### WHERE Clause

Filter results:

```sql
SELECT * FROM employees WHERE age > 25;
```

### ORDER BY Clause

Sort results:

```sql
SELECT * FROM employees ORDER BY age DESC;
```

### LIMIT Clause

Limit number of results:

```sql
SELECT * FROM employees LIMIT 5;
```

---

## 7. JOIN Operations

### INNER JOIN

Returns only rows with matching data in both tables:

```sql
SELECT employees.name, departments.name
FROM employees
INNER JOIN departments ON employees.department_id = departments.id;
```

### LEFT JOIN

Returns all rows from the left table, with matching rows from the right table (or NULL if no match):

```sql
SELECT employees.name, departments.name
FROM employees
LEFT JOIN departments ON employees.department_id = departments.id;
```

---

## 8. SQL Functions

### Aggregate Functions

- **COUNT()**: Counts the number of rows.
- **SUM()**: Adds up values.
- **AVG()**: Computes the average.
- **MAX()**: Finds the maximum value.
- **MIN()**: Finds the minimum value.

Example:

```sql
SELECT COUNT(*) FROM employees;
SELECT AVG(age) FROM employees;
```

### String Functions

- **CONCAT()**: Concatenate strings.
- **UPPER()**: Convert to uppercase.
- **LOWER()**: Convert to lowercase.

Example:

```sql
SELECT CONCAT(first_name, ' ', last_name) AS full_name FROM employees;
SELECT UPPER(name) FROM employees;
```

---

## 9. Subqueries

A **subquery** is a query within another query.

### Example:

```sql
SELECT name FROM employees
WHERE department_id = (SELECT id FROM departments WHERE name = 'HR');
```

---

## 10. Data Modification

### INSERT

Add a new record:

```sql
INSERT INTO employees (id, name, age, department_id)
VALUES (1, 'Alice', 30, 2);
```

### UPDATE

Update an existing record:

```sql
UPDATE employees
SET age = 31
WHERE name = 'Alice';
```

### DELETE

Delete a record:

```sql
DELETE FROM employees WHERE name = 'Alice';
```

---

## 11. Transactions

A **transaction** is a sequence of SQL operations executed as a single unit. Transactions ensure the integrity of data.

- **COMMIT**: Saves changes made during the transaction.
- **ROLLBACK**: Reverts changes made during the transaction.

Example:

```sql
BEGIN TRANSACTION;
UPDATE employees SET age = 32 WHERE name = 'Alice';
COMMIT;
```

---

## 12. Indexes

An **index** improves the speed of data retrieval operations on a table.

### Creating an Index

```sql
CREATE INDEX idx_name ON employees (name);
```

---

## 13. Views

A **view** is a virtual table based on the result of a query. It doesn't store data but provides a convenient way to access complex queries.

### Creating a View

```sql
CREATE VIEW employee_view AS
SELECT name, age FROM employees WHERE age > 30;
```

---

# Summary

Database fundamentals and SQL include:

- Database models and design
- SQL syntax and data types
- Data manipulation (INSERT, UPDATE, DELETE)
- Querying with SELECT, WHERE, JOIN
- Functions (aggregate, string)
- Transactions and data integrity
- Views and indexes
